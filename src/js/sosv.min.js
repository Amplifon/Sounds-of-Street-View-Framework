!function(){var a={},b=null,c=!0,d=!1;try{"undefined"!=typeof AudioContext?b=new AudioContext:"undefined"!=typeof webkitAudioContext?b=new webkitAudioContext:c=!1}catch(e){c=!1}if(!c)if("undefined"!=typeof Audio)try{new Audio}catch(e){d=!0}else d=!0;if(c){var f="undefined"==typeof b.createGain?b.createGainNode():b.createGain();f.gain.value=1,f.connect(b.destination)}var g=function(){this._volume=1,this._muted=!1,this.usingWebAudio=c,this.noAudio=d,this._howls=[]};g.prototype={volume:function(a){var b=this;if(a=parseFloat(a),a>=0&&1>=a){b._volume=a,c&&(f.gain.value=a);for(var d in b._howls)if(b._howls.hasOwnProperty(d)&&b._howls[d]._webAudio===!1)for(var e=0;e<b._howls[d]._audioNode.length;e++)b._howls[d]._audioNode[e].volume=b._howls[d]._volume*b._volume;return b}return c?f.gain.value:b._volume},mute:function(){return this._setMuted(!0),this},unmute:function(){return this._setMuted(!1),this},_setMuted:function(a){var b=this;b._muted=a,c&&(f.gain.value=a?0:b._volume);for(var d in b._howls)if(b._howls.hasOwnProperty(d)&&b._howls[d]._webAudio===!1)for(var e=0;e<b._howls[d]._audioNode.length;e++)b._howls[d]._audioNode[e].muted=a}};var h=new g,i=null;if(!d){i=new Audio;var j={mp3:!!i.canPlayType("audio/mpeg;").replace(/^no$/,""),opus:!!i.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!i.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!i.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),m4a:!!(i.canPlayType("audio/x-m4a;")||i.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(i.canPlayType("audio/x-mp4;")||i.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!i.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")}}var k=function(a){var b=this;b._autoplay=a.autoplay||!1,b._buffer=a.buffer||!1,b._duration=a.duration||0,b._format=a.format||null,b._loop=a.loop||!1,b._loaded=!1,b._sprite=a.sprite||{},b._src=a.src||"",b._pos3d=a.pos3d||[0,0,-.5],b._volume=void 0!==a.volume?a.volume:1,b._urls=a.urls||[],b._rate=a.rate||1,b._model=a.model||null,b._onload=[a.onload||function(){}],b._onloaderror=[a.onloaderror||function(){}],b._onend=[a.onend||function(){}],b._onpause=[a.onpause||function(){}],b._onplay=[a.onplay||function(){}],b._onendTimer=[],b._webAudio=c&&!b._buffer,b._audioNode=[],b._webAudio&&b._setupAudioNode(),h._howls.push(b),b.load()};if(k.prototype={load:function(){var b=this,c=null;if(d)return void b.on("loaderror");for(var e=0;e<b._urls.length;e++){var f,i;if(b._format)f=b._format;else{if(i=b._urls[e].toLowerCase().split("?")[0],f=i.match(/.+\.([^?]+)(\?|$)/),f=f&&f.length>=2?f:i.match(/data\:audio\/([^?]+);/),!f)return void b.on("loaderror");f=f[1]}if(j[f]){c=b._urls[e];break}}if(!c)return void b.on("loaderror");if(b._src=c,b._webAudio)l(b,c);else{var k=new Audio;k.addEventListener("error",function(){k.error&&4===k.error.code&&(g.noAudio=!0),b.on("loaderror",{type:k.error?k.error.code:0})},!1),b._audioNode.push(k),k.src=c,k._pos=0,k.preload="auto",k.volume=h._muted?0:b._volume*h.volume(),a[c]=b;var m=function(){b._duration=Math.ceil(10*k.duration)/10,0===Object.getOwnPropertyNames(b._sprite).length&&(b._sprite={_default:[0,1e3*b._duration]}),b._loaded||(b._loaded=!0,b.on("load")),b._autoplay&&b.play(),k.removeEventListener("canplaythrough",m,!1)};k.addEventListener("canplaythrough",m,!1),k.load()}return b},urls:function(a){var b=this;return a?(b.stop(),b._urls="string"==typeof a?[a]:a,b._loaded=!1,b.load(),b):b._urls},play:function(a,c){var d=this;return"function"==typeof a&&(c=a),a&&"function"!=typeof a||(a="_default"),d._loaded?d._sprite[a]?(d._inactiveNode(function(e){e._sprite=a;var f,g=e._pos>0?e._pos:d._sprite[a][0]/1e3,i=d._sprite[a][1]/1e3-e._pos,j=!(!d._loop&&!d._sprite[a][2]),k="string"==typeof c?c:Math.round(Date.now()*Math.random())+"";if(function(){var b={id:k,sprite:a,loop:j};f=setTimeout(function(){!d._webAudio&&j&&d.stop(b.id).play(a,b.id),d._webAudio&&!j&&(d._nodeById(b.id).paused=!0,d._nodeById(b.id)._pos=0),d._webAudio||j||d.stop(b.id),d.on("end",k)},1e3*i),d._onendTimer.push({timer:f,id:b.id})}(),d._webAudio){var l=d._sprite[a][0]/1e3,m=d._sprite[a][1]/1e3;if(e.id=k,e.paused=!1,n(d,[j,l,m],k),d._playStart=b.currentTime,e.gain.value=d._volume,"undefined"==typeof e.bufferSource)return;"undefined"==typeof e.bufferSource.start?e.bufferSource.noteGrainOn(0,g,i):e.bufferSource.start(0,g,i)}else{if(4!==e.readyState&&(e.readyState||!navigator.isCocoonJS))return d._clearEndTimer(k),function(){var b=d,f=a,g=c,h=e,i=function(){b.play(f,g),h.removeEventListener("canplaythrough",i,!1)};h.addEventListener("canplaythrough",i,!1)}(),d;e.readyState=4,e.id=k,e.currentTime=g,e.muted=h._muted||e.muted,e.volume=d._volume*h.volume(),setTimeout(function(){e.play()},0)}return d.on("play"),"function"==typeof c&&c(k),d}),d):("function"==typeof c&&c(),d):(d.on("load",function(){d.play(a,c)}),d)},pause:function(a){var b=this;if(!b._loaded)return b.on("play",function(){b.pause(a)}),b;b._clearEndTimer(a);var c=a?b._nodeById(a):b._activeNode();if(c)if(c._pos=b.pos(null,a),b._webAudio){if(!c.bufferSource||c.paused)return b;c.paused=!0,"undefined"==typeof c.bufferSource.stop?c.bufferSource.noteOff(0):c.bufferSource.stop(0)}else c.pause();return b.on("pause"),b},stop:function(a){var b=this;if(!b._loaded)return b.on("play",function(){b.stop(a)}),b;b._clearEndTimer(a);var c=a?b._nodeById(a):b._activeNode();if(c)if(c._pos=0,b._webAudio){if(!c.bufferSource||c.paused)return b;c.paused=!0,"undefined"==typeof c.bufferSource.stop?c.bufferSource.noteOff(0):c.bufferSource.stop(0)}else isNaN(c.duration)||(c.pause(),c.currentTime=0);return b},mute:function(a){var b=this;if(!b._loaded)return b.on("play",function(){b.mute(a)}),b;var c=a?b._nodeById(a):b._activeNode();return c&&(b._webAudio?c.gain.value=0:c.muted=!0),b},unmute:function(a){var b=this;if(!b._loaded)return b.on("play",function(){b.unmute(a)}),b;var c=a?b._nodeById(a):b._activeNode();return c&&(b._webAudio?c.gain.value=b._volume:c.muted=!1),b},volume:function(a,b){var c=this;if(a=parseFloat(a),a>=0&&1>=a){if(c._volume=a,!c._loaded)return c.on("play",function(){c.volume(a,b)}),c;var d=b?c._nodeById(b):c._activeNode();return d&&(c._webAudio?d.gain.value=a:d.volume=a*h.volume()),c}return c._volume},filter:function(a,b){var c=this;a=parseFloat(a),c._freq=a;var d=b?c._nodeById(b):c._activeNode();return d&&c._webAudio&&(d.filter.frequency.value=a),c},loop:function(a){var b=this;return"boolean"==typeof a?(b._loop=a,b):b._loop},sprite:function(a){var b=this;return"object"==typeof a?(b._sprite=a,b):b._sprite},pos:function(a,c){var d=this;if(!d._loaded)return d.on("load",function(){d.pos(a)}),"number"==typeof a?d:d._pos||0;a=parseFloat(a);var e=c?d._nodeById(c):d._activeNode();if(e)return a>=0?(d.pause(c),e._pos=a,d.play(e._sprite,c),d):d._webAudio?e._pos+(b.currentTime-d._playStart):e.currentTime;if(a>=0)return d;for(var f=0;f<d._audioNode.length;f++)if(d._audioNode[f].paused&&4===d._audioNode[f].readyState)return d._webAudio?d._audioNode[f]._pos:d._audioNode[f].currentTime},pos3d:function(a,b,c,d){var e=this;if(b="undefined"!=typeof b&&b?b:0,c="undefined"!=typeof c&&c?c:-.5,!e._loaded)return e.on("play",function(){e.pos3d(a,b,c,d)}),e;if(!(a>=0||0>a))return e._pos3d;if(e._webAudio){var f=d?e._nodeById(d):e._activeNode();f&&(e._pos3d=[a,b,c],f.panner.setPosition(a,b,c),f.panner.panningModel=e._model||"HRTF")}return e},fade:function(a,b,c,d,e){var f=this,g=Math.abs(a-b),h=a>b?"down":"up",i=g/.01,j=c/i;if(!f._loaded)return f.on("load",function(){f.fade(a,b,c,d,e)}),f;f.volume(a,e);for(var k=1;i>=k;k++)!function(){var a=f._volume+("up"===h?.01:-.01)*k,c=Math.round(1e3*a)/1e3,g=b;setTimeout(function(){f.volume(c,e),c===g&&d&&d()},j*k)}()},fadeIn:function(a,b,c){return this.volume(0).play().fade(0,a,b,c)},fadeOut:function(a,b,c,d){var e=this;return e.fade(e._volume,a,b,function(){c&&c(),e.pause(d),e.on("end")},d)},_nodeById:function(a){for(var b=this,c=b._audioNode[0],d=0;d<b._audioNode.length;d++)if(b._audioNode[d].id===a){c=b._audioNode[d];break}return c},_activeNode:function(){for(var a=this,b=null,c=0;c<a._audioNode.length;c++)if(!a._audioNode[c].paused){b=a._audioNode[c];break}return a._drainPool(),b},_inactiveNode:function(a){for(var b=this,c=null,d=0;d<b._audioNode.length;d++)if(b._audioNode[d].paused&&4===b._audioNode[d].readyState){a(b._audioNode[d]),c=!0;break}if(b._drainPool(),!c){var e;b._webAudio?(e=b._setupAudioNode(),a(e)):(b.load(),e=b._audioNode[b._audioNode.length-1],e.addEventListener(navigator.isCocoonJS?"canplaythrough":"loadedmetadata",function(){a(e)}))}},_drainPool:function(){var a,b=this,c=0;for(a=0;a<b._audioNode.length;a++)b._audioNode[a].paused&&c++;for(a=b._audioNode.length-1;a>=0&&!(5>=c);a--)b._audioNode[a].paused&&(b._webAudio&&b._audioNode[a].disconnect(0),c--,b._audioNode.splice(a,1))},_clearEndTimer:function(a){for(var b=this,c=0,d=0;d<b._onendTimer.length;d++)if(b._onendTimer[d].id===a){c=d;break}var e=b._onendTimer[c];e&&(clearTimeout(e.timer),b._onendTimer.splice(c,1))},_setupAudioNode:function(){var a=this,c=a._audioNode,d=a._audioNode.length;return c[d]="undefined"==typeof b.createGain?b.createGainNode():b.createGain(),c[d].gain.value=a._volume,c[d].paused=!0,c[d]._pos=0,c[d].readyState=2,c[d].connect(f),c[d].panner=b.createPanner(),c[d].panner.panningModel=a._model||"equalpower",c[d].panner.setPosition(a._pos3d[0],a._pos3d[1],a._pos3d[2]),c[d].filter=b.createBiquadFilter(),c[d].filter.type="lowpass",c[d].filter.frequency.value=880,c[d].filter.Q.value=0,c[d].filter.gain.value=0,c[d].panner.connect(c[d].filter),c[d].filter.connect(c[d]),c[d]},on:function(a,b){var c=this,d=c["_on"+a];if("function"==typeof b)d.push(b);else for(var e=0;e<d.length;e++)b?d[e].call(c,b):d[e].call(c);return c},off:function(a,b){for(var c=this,d=c["_on"+a],e=b.toString(),f=0;f<d.length;f++)if(e===d[f].toString()){d.splice(f,1);break}return c},unload:function(){for(var b=this,c=b._audioNode,d=0;d<b._audioNode.length;d++)c[d].paused||b.stop(c[d].id),b._webAudio?c[d].disconnect(0):c[d].src="";for(d=0;d<b._onendTimer.length;d++)clearTimeout(b._onendTimer[d].timer);var e=h._howls.indexOf(b);null!==e&&e>=0&&h._howls.splice(e,1),delete a[b._src],b=null}},c)var l=function(c,d){if(d in a)c._duration=a[d].duration,m(c);else{var e=new XMLHttpRequest;e.open("GET",d,!0),e.responseType="arraybuffer",e.onload=function(){b.decodeAudioData(e.response,function(b){b&&(a[d]=b,m(c,b))},function(){c.on("loaderror")})},e.onerror=function(){c._webAudio&&(c._buffer=!0,c._webAudio=!1,c._audioNode=[],delete c._gainNode,c.load())};try{e.send()}catch(f){e.onerror()}}},m=function(a,b){a._duration=b?b.duration:a._duration,0===Object.getOwnPropertyNames(a._sprite).length&&(a._sprite={_default:[0,1e3*a._duration]}),a._loaded||(a._loaded=!0,a.on("load")),a._autoplay&&a.play()},n=function(c,d,e){var f=c._nodeById(e);"undefined"!=typeof a[c._src]&&(f.bufferSource=b.createBufferSource(),f.bufferSource.buffer=a[c._src],f.bufferSource.connect(f.panner),f.bufferSource.loop=d[0],d[0]&&(f.bufferSource.loopStart=d[1],f.bufferSource.loopEnd=d[1]+d[2]),f.bufferSource.playbackRate.value=c._rate)};"function"==typeof define&&define.amd&&define(function(){return{Howler:h,Howl:k}}),"undefined"!=typeof exports&&(exports.Howler=h,exports.Howl=k),"undefined"!=typeof window&&(window.Howler=h,window.Howl=k)}();var getUrlVars=function(){{var a={};window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(b,c,d){a[c]=d})}return a},devMode=getUrlVars().dev,rad=function(a){return a*Math.PI/180},Distance=function(a,b,c){var d=6378137,e=rad(b.lat()-a.lat()),f=rad(b.lng()-a.lng()),g=Math.sin(e/2)*Math.sin(e/2)+Math.cos(rad(a.lat()))*Math.cos(rad(b.lat()))*Math.sin(f/2)*Math.sin(f/2),h=2*Math.atan2(Math.sqrt(g),Math.sqrt(1-g)),i=d*h;return"miles"==c&&(i=.000621371192*i),i},Sound=function(a,b,c){var d=this;this.sosv=c,this.data=a,this.map=b,this.sound=null,this.vol=0,this.position=new google.maps.LatLng(this.data.lat,this.data.lng),this.prevUserPosition={lat:null,lng:null},this.prevVolume=0,this.init=function(){$(document.body).on("panoChanged",this.onUserMovement).on("positionChanged",this.onUserMovement).on("povChanged",this.onUserMovement),this.createSound(),this.addSoundToMap()},this.createSound=function(){var a=parseFloat(d.data.pause)?!1:!0;d.sound=new Howl({urls:d.data.src,loop:a,onload:d.onSoundLoaded,onloaderror:d.onSoundLoadError})},this.onSoundLoaded=function(){$(document.body).trigger("soundLoaded",d.data)},this.onSoundLoadError=function(){$(document.body).trigger("soundLoadError",d.data)},this.addSoundToMap=function(){d.data.icon=devMode?"data:image/gif;base64,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":"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",d.data.draggable=devMode?!0:!1,d.sosv.addMarker(d.data),this.updatePan()},this.playSound=function(){d.sound.play(),parseFloat(d.data.pause)&&d.sound.on("end",function(){d.sound.pause(),setTimeout(function(){d.sound.play()},parseInt(d.data.pause))})},this.stopSound=function(){d.sound.stop()},this.unloadSound=function(a){d.sound.fade(d.vol,0,a,function(){d.sound.unload()}),setTimeout(function(){d.sound&&d.sound.unload()},a+50)},this.onUserMovement=function(a,b){var c=b.getPosition().lat(),e=b.getPosition().lng(),f=b.getPov().heading;d.updatePan(c,e,f),d.updateVolume(c,e,b)},this.updatePan=function(a,b,c){var e=d.data.lat-a,f=d.data.lng-b,g=Math.atan2(f,e)*(180/Math.PI);g-=c,-180>g?g+=360:g>180&&(g-=360);var h=g/90;if(Math.abs(h)>1){var i=Math.abs(h)-1;h=h>0?1-i:-1+i}d.sound.pos3d(h,1,1);var j=11e3;Math.abs(g)>90&&(j-=55*(Math.abs(g)-90)),d.sound.filter(j)},this.updateVolume=function(a,b,c){if(a!==d.prevUserPosition.lat||b!==d.prevUserPosition.lng){var e=Distance(d.position,c.getPosition());d.vol=d.calculateVolume(e),d.sound.fade(d.prevVolume,d.vol,500),d.prevVolume=d.vol,d.prevUserPosition.lat=a,d.prevUserPosition.lng=b}},this.calculateVolume=function(a){return d.vol=1/(a*a),d.vol=Math.min(d.vol*d.data.db,1),d.vol},this.init()},SOSV=function(a){var b,c,d=this,e=[],f=[],g=0;this.init=function(){return this.webApiTest?($(document.body).on("soundLoaded",this.onSoundLoaded).on("soundLoadError",this.onSoundLoaded).on("changeLocation",this.onChangeLocation).on("panoChanged",this.showUserData).on("povChanged",this.showUserData).on("positionChanged",this.showUserData).on("markerClicked",this.showMarkerData).on("markerDragEnd",this.showMarkerData),devMode&&this.addDevModeMarkup(),void $.getJSON(a,this.onJsonLoaded)):void alert("Your browser does not support the Web Audio API!")},this.webApiTest=function(){var a;return"undefined"!=typeof AudioContext?a=new AudioContext:"undefined"!=typeof webkitAudioContext&&(a=new webkitAudioContext),a?!0:!1},this.onJsonLoaded=function(a){g=a.sounds.length,d.createStreetView(a),d.loadSounds(a),g||d.onSoundLoaded(null)},this.createStreetView=function(a){b=$("#"+a.id),c=new google.maps.StreetViewPanorama(document.getElementById(a.id),{position:new google.maps.LatLng(a.lat,a.lng),pov:{heading:Number(a.heading),pitch:Number(a.pitch)}}),google.maps.event.addListener(c,"pano_changed",this.onPanoChanged),google.maps.event.addListener(c,"position_changed",this.onPositionChanged),google.maps.event.addListener(c,"pov_changed",this.onPovChanged)},this.addMarker=function(a){var b=new google.maps.Marker({map:c,title:a.name,position:new google.maps.LatLng(a.lat,a.lng),draggable:a.draggable,icon:a.icon});e.push(b),google.maps.event.addListener(b,"click",function(c){$(document.body).trigger("markerClicked",[c,b,a])}),google.maps.event.addListener(b,"dragend",function(c){$(document.body).trigger("markerDragEnd",[c,b,a])})},this.onPanoChanged=function(){b.trigger("panoChanged",c)},this.onPositionChanged=function(){b.trigger("positionChanged",c)},this.onPovChanged=function(){b.trigger("povChanged",c)},this.loadSounds=function(a){for(var b=0;b<a.sounds.length;b++){var e=new Sound(a.sounds[b],c,d);f.push(e)}},this.onSoundLoaded=function(){g--,0>=g&&d.playSounds()},this.playSounds=function(){for(var a=0;a<f.length;a++)f[a].playSound(),f[a].onUserMovement(null,c)},this.showUserData=function(a,b){$("#user-pos").find(".user-lat").text(b.getPosition().lat()).end().find(".user-lng").text(b.getPosition().lng()).end().find(".user-heading").text(b.getPov().heading).end().find(".user-pitch").text(b.getPov().pitch)},this.showMarkerData=function(a,b,c,d){var e=d;delete e.icon,delete e.draggable,e.lat=""+b.latLng.lat(),e.lng=""+b.latLng.lng();var f=JSON.stringify(e,null," ");$("#marker-pos").find(".json-pre").html(f)},this.addDevModeMarkup=function(){var a=$('<div id="user-pos"></div>');a.append("<h2>User (you)</h2>").css({margin:"1em 0 0.3em 0","border-bottom":"1px solid #181818","padding-bottom":"1em"}),a.append('<table><tr><td>Lat</td><td class="user-lat"></td></tr><tr><td>Lng</td><td class="user-lng"></td></tr><tr><td>Heading</td><td class="user-heading"></td></tr><tr><td>Pitch</td><td class="user-pitch"></td></tr></table>');var b=$('<div id="marker-pos" ></div>');b.append('<h2>Marker <p style="font-weight: normal; font-size: .6em; max-width: 300px;">Drag a marker, then copy and paste the code below to your JSON data file</p></h2>').css({margin:"1.7em 0 0.5em 0","border-bottom":"1px solid #181818","padding-bottom":".4em"}),b.append('<pre class="json-pre"></pre>').css({"line-height":"1.3em"});var c=$('<div id="debug-wrap"></div>').append(a).append(b).css({position:"absolute","min-width":"350px","font-family":"sans-serif","font-size":"1em",top:"10px",right:"10px",padding:"1.4em 2em",background:"#fff"});$("body").append(c)},this.init()};